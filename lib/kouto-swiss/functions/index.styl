// _replace
// internal search and replace in expr
_replace( expr, str, val )
    expr = clone( expr )
    for e, i in expr
        if str == e
            expr[ i ] = val
    expr

// _strip-units
// remove units of a number
_strip-units( val )
    unit( val, "" )

// percent( value, total )
// return the percentage value of value in total
percent( value, total )
    value = _strip-units( value )
    total = _strip-units( total )
    value / total * 100%

ks-em-base = 16px

// em( value, base )
// convert pixels to em, with given base
em( value, base = ks-em-base )
    value = _strip-units( value )
    base = _strip-units( base )
    value / base * 1em

// rem( value, base )
// convert pixels to rem
rem( value )
    value = _strip-units( value )
    base = ks-rem-base is a "unit" ? _strip-units( ks-rem-base ) : 16
    value / base * 1rem
